#!/bin/sh

basedir=`dirname "$0"`

#!/bin/sh

basedir=`dirname "$0"`

echo "Configuring project"
echo "******************************"

if [ ! -d "$basedir/.venv" ]; then
  echo "Creating a new virtual environment..."
  python3 -m venv .venv
else
  echo "Virtual environment already exists"
fi
echo "******************************"

# Check if the venv is activated.
if [ -z "$VIRTUAL_ENV" ]; then
  echo "Activating the virtual environment"
  source ".venv/bin/activate"
else
  echo "Virtual environment has been activated"
fi
echo "******************************"

echo "Installing required modules"
pip3 install -r requirements.txt
echo "******************************"

echo "Running Ruff code analysis"
echo "******************************"
ruff --select=ALL src/main/python

echo "Starting the application"
echo "******************************"
python3 src/main/python/<%= capitalizedBaseName %>App.py
