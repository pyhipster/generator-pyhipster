#!/bin/sh

basedir=`dirname "$0"`

echo "Configuring project"
echo "******************************"

if [ -d "$basedir/.venv" ]; then
echo "Virtual environment already exists"
else
echo "Creating a new virtual environment..."
python3 -m venv .venv
fi
echo "******************************"

if ["$VIRTUAL_ENV" = "$basedir/.venv"]; then
echo "Virtual environment has been activated"
else
echo "Activating the virtual environment"
source ".venv/bin/activate"
fi
echo "******************************"

echo "Installing required modules"
pip3 install -r requirements.txt
echo "******************************"

echo "Running Ruff code analysis"
echo "******************************"
ruff --select=ALL src/main/python

echo "Starting the application"
echo "******************************"
python3 src/main/python/<%= capitalizedBaseName %>App.py
